# My Notes 部署与配置指南

本指南将介绍如何部署 **My Notes** 笔记浏览器，并将其连接到您的 GitHub 公有或私有笔记仓库。

---

## 1. 部署笔记浏览器 (GitHub Pages)

您可以将 `index.html` 部署到任何静态网站托管服务，最简单的方法是使用 GitHub Pages。

### 步骤：
1. **创建仓库**：在 GitHub 上创建一个新仓库（例如名为 `my-notes`）。
2. **上传文件**：将项目中的 `index.html`， `css文件夹`，`js文件夹` 上传到该仓库的根目录。
3. **启用 Pages**：
   - 进入仓库的 **Settings** -> **Pages**。
   - 在 **Build and deployment** 下的 **Branch** 部分，选择 `main` 分支和 `/ (root)` 目录。
   - 点击 **Save**。
4. **等待部署**：等待几分钟后，GitHub 会提供一个链接。
5. **访问**：访问提供的链接（例如 `https://<your-username>.github.io/my-notes/`）。
---

## 2. 连接笔记仓库 (公有仓库)

如果您的笔记保存在一个**公开**的 GitHub 仓库中，配置非常简单。

### 方式 A：通过界面配置
1. 打开部署好的网页。
2. 点击右上角的 **⚙ (配置)** 图标。
3. 填写以下信息：
   - **GitHub 用户名/组织**：例如 `ShingWha`
   - **仓库名称**：例如 `notes-content`
   - **根目录路径** (可选)：如果笔记在某个文件夹下（如 `docs`），请填写。
4. 点击 **保存并刷新**。

### 方式 B：通过 URL 参数自动加载
您可以通过 URL 参数直接分享特定仓库的链接：
`https://<your-pages-url>/?user=用户名&repo=仓库名&path=文件夹`

---

## 3. 连接笔记仓库 (私有仓库)

如果您的笔记保存在**私有**仓库中，需要生成一个 GitHub Personal Access Token (PAT) 来授权访问。

### 第一步：生成 GitHub Token
1. 访问 GitHub [Fine-grained personal access tokens](https://github.com/settings/tokens?type=beta) (推荐)。
2. 点击 **Generate new token**。
3. 设置 Token 名称和有效期。
4. **Repository access**: 选择 **Only select repositories** 并选中您的笔记仓库。
5. **Permissions**: 
   - 在 **Repository permissions** 中，找到 **Contents**，选择 **Access: Read-only**。
   - **Metadata** 会被自动设为只读。
6. 生成并**复制**该 Token（它只会显示一次）。

### 第二步：在 My Notes 中配置
1. 打开网页，进入 **⚙ (配置)**。
2. 填写用户名和仓库名。
3. 在 **GitHub Token** 框中粘贴刚才生成的 Token。
4. 点击 **保存并刷新**。

> **安全提示**：Token 仅保存在您浏览器的 `localStorage` 中，不会上传到任何服务器。但在公共电脑上使用时请注意清理缓存。

---

## 4. 进阶：多仓库管理与链接分享

### 自动识别
如果您将 `index.html` 部署在笔记仓库本身的 `gh-pages` 分支上，应用会自动识别当前用户名和仓库名，实现“零配置”开箱即用。

### 链接分享 (URL 参数与 Hash)
您可以利用 URL 参数或哈希（Hash）来快速分享特定笔记仓库：
- **参数方式**：`?user=用户名&repo=仓库名&path=路径`
- **Hash 方式**：`#/{用户名}/{仓库名}/{路径}`
  - 示例：`https://shingwha.github.io/my-notes/#/ShingWha/my-notes/notes`

### 搜索功能
- 按下 `Ctrl + F` (或 `Cmd + F`) 可快速聚焦搜索框。
- 搜索支持模糊匹配文件名。

---

## 常见问题排查
1. **内容加载失败**：检查网络（是否能访问 api.github.com）及 Token 权限是否正确。
2. **API 速率限制**：GitHub 对匿名请求有严格的速率限制。如果频繁刷新，建议配置 Token 以增加配额（即使是公有仓库）。
3. **文件夹显示为空**：确保文件夹内含有 `.md` 后缀的文件。
