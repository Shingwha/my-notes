<!doctype html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>My Notes</title>

        <!-- 外部依赖 -->
        <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js"></script>
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"
        />
        <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css"
        />
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-javascript.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-typescript.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-markdown.min.js"></script>

        <!-- 本地样式 -->
        <link rel="stylesheet" href="./css/styles.css" />
    </head>
    <body>
        <div class="container">
            <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <div class="header-top">
                        <div class="logo" id="sidebarLogo">My Notes</div>
                        <div class="header-actions">
                            <button
                                class="icon-btn"
                                id="themeToggleBtn"
                                title="切换主题"
                            >
                                <svg
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                >
                                    <circle cx="12" cy="12" r="9" />
                                    <path d="M12 3v18" />
                                    <path
                                        d="M12 3a9 9 0 0 1 0 18z"
                                        fill="currentColor"
                                    />
                                </svg>
                            </button>
                            <button
                                class="icon-btn"
                                id="refreshBtn"
                                title="刷新"
                            >
                                <svg
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                >
                                    <path
                                        d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"
                                    />
                                </svg>
                            </button>
                            <button
                                class="icon-btn"
                                id="settingsBtn"
                                title="配置"
                            >
                                <svg
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                >
                                    <path d="M12 15a3 3 0 100-6 3 3 0 000 6z" />
                                    <path
                                        d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"
                                    />
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="search-box">
                        <span class="search-icon">
                            <svg
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                style="width: 14px; height: 14px"
                            >
                                <circle cx="11" cy="11" r="8" />
                                <path d="M21 21l-4.35-4.35" />
                            </svg>
                        </span>
                        <input
                            type="text"
                            class="search-input"
                            id="searchInput"
                            placeholder="搜索笔记..."
                        />
                    </div>
                </div>
                <div class="nav-tree" id="navTree"></div>
            </aside>

            <div class="mobile-overlay" id="mobileOverlay"></div>

            <!-- Main Content -->
            <main class="main-content">
                <div class="loading-bar" id="loadingBar"></div>
                <div class="toolbar">
                    <div class="toolbar-left">
                        <button
                            class="icon-btn mobile-menu-btn"
                            id="mobileMenuBtn"
                        >
                            ☰
                        </button>
                        <div class="toolbar-title" id="toolbarTitle">
                            选择一个笔记
                        </div>
                    </div>
                    <div class="toolbar-actions">
                        <button class="icon-btn" id="githubBtn" title="GitHub">
                            <svg
                                width="16"
                                height="16"
                                viewBox="0 0 16 16"
                                fill="currentColor"
                            >
                                <path
                                    d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"
                                ></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="content-viewport" id="contentViewport">
                    <div class="content-area" id="contentArea">
                        <div class="empty-state">
                            <div
                                class="logo"
                                style="
                                    font-size: 24px;
                                    margin-bottom: 16px;
                                    opacity: 0.5;
                                "
                            >
                                NOTES
                            </div>
                            <p>从左侧目录选择一个 Markdown 文件开始阅读</p>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Settings Modal -->
        <div class="modal-overlay" id="settingsModal">
            <div class="modal" style="max-width: 440px">
                <h3 class="modal-title">仓库配置</h3>

                <!-- 快速导入区 -->
                <div
                    style="
                        background: var(--hover-bg);
                        padding: 12px;
                        border-radius: 6px;
                        margin-bottom: 20px;
                        border: 1px dashed var(--border-color);
                    "
                >
                    <label
                        class="form-label"
                        style="color: var(--accent-color); font-weight: 600"
                        >快速导入 GitHub 链接</label
                    >
                    <div style="display: flex; gap: 8px">
                        <input
                            type="text"
                            class="form-input"
                            id="importUrlInput"
                            placeholder="https://github.com/用户名/仓库名"
                        />
                        <button
                            class="btn primary"
                            id="importUrlBtn"
                            style="white-space: nowrap"
                        >
                            导入
                        </button>
                    </div>
                </div>

                <div
                    style="
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 12px;
                    "
                >
                    <div class="form-group">
                        <label class="form-label">用户名 / 组织</label>
                        <input
                            type="text"
                            class="form-input"
                            id="githubUsername"
                            placeholder="ShingWha"
                        />
                    </div>
                    <div class="form-group">
                        <label class="form-label">仓库名称</label>
                        <input
                            type="text"
                            class="form-input"
                            id="githubRepo"
                            placeholder="my-notes"
                        />
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">根目录路径 (可选)</label>
                    <input
                        type="text"
                        class="form-input"
                        id="githubPath"
                        placeholder="例如: notes"
                    />
                </div>

                <div class="form-group">
                    <label class="form-label"
                        >GitHub Token (私有仓库必填)</label
                    >
                    <input
                        type="password"
                        class="form-input"
                        id="githubToken"
                        placeholder="ghp_xxxxxxxxxxxx"
                    />
                    <p
                        style="
                            font-size: 11px;
                            color: var(--text-tertiary);
                            margin-top: 4px;
                        "
                    >
                        Token 仅加密保存在本地浏览器缓存中
                    </p>
                </div>

                <div class="modal-actions">
                    <button class="btn" id="settingsCancel">取消</button>
                    <button class="btn primary" id="settingsSave">
                        应用并刷新
                    </button>
                </div>
            </div>
        </div>

        <div class="toast" id="toast"></div>

        <!-- 应用入口 -->
        <script type="module" src="./js/main.js"></script>
    </body>
</html>
